{
  "rules":{
    ".write":"false",
    ".read":"false",
    "chatboxes": {
      ".write":"false",
      ".read":"false",
      "$chatbox_id": {
        ".write":"((true&&auth.admin===true&&(!newData.child('activated').exists()||newData.child('activated').isBoolean())&&(!newData.child('activated_at').exists()||newData.child('activated_at').isString())&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.child('color').exists()||newData.child('color').isString())&&newData.exists()&&!data.exists()&&(!newData.child('domain').exists()||newData.child('domain').isString())&&(!newData.child('texturize').exists()||newData.child('texturize').isBoolean())&&(!newData.child('exclude').exists()||newData.child('exclude').isString())&&(!newData.child('include').exists()||newData.child('include').isString())&&(!newData.child('initial_offline_message').exists()||newData.child('initial_offline_message').isString())&&(!newData.child('initial_online_message').exists()||newData.child('initial_online_message').isString())&&(!newData.child('canned').exists()||!(((newData.child('canned').isString()||newData.child('canned').isNumber()||newData.child('canned').isBoolean()))))&&(!newData.child('agents').exists()||!(((newData.child('agents').isString()||newData.child('agents').isNumber()||newData.child('agents').isBoolean()))))&&(!newData.child('triggers').exists()||!(((newData.child('triggers').isString()||newData.child('triggers').isNumber()||newData.child('triggers').isBoolean()))))&&(!newData.child('introducers').exists()||!(((newData.child('introducers').isString()||newData.child('introducers').isNumber()||newData.child('introducers').isBoolean()))))&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
        ".read":"(auth.id!==null)",
        "activated": {
          ".write":"((auth.admin===true&&(!newData.exists()||newData.isBoolean())&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "activated_at": {
          ".write":"((auth.admin===true&&(!newData.exists()||newData.isString())&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "color": {
          ".write":"((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.exists()||newData.isString())&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "domain": {
          ".write":"((newData.exists()&&!data.exists()&&(!newData.exists()||newData.isString())&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "texturize": {
          ".write":"(((!newData.exists()||newData.isBoolean())&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "exclude": {
          ".write":"((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.exists()||newData.isString())&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "include": {
          ".write":"((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.exists()||newData.isString())&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "initial_offline_message": {
          ".write":"((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.exists()||newData.isString())&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "initial_online_message": {
          ".write":"((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.exists()||newData.isString())&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "canned": {
          ".write":"((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.exists()||!(((newData.isString()||newData.isNumber()||newData.isBoolean()))))&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "agents": {
          ".write":"((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.exists()||!(((newData.isString()||newData.isNumber()||newData.isBoolean()))))&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "triggers": {
          ".write":"((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.exists()||!(((newData.isString()||newData.isNumber()||newData.isBoolean()))))&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "introducers": {
          ".write":"((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true&&(!newData.exists()||!(((newData.isString()||newData.isNumber()||newData.isBoolean()))))&&(auth.admin===true||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true)))",
          ".read":"(auth.id!==null)"
        },
        "$other":{".validate":"false"}
      }
    },
    "contacts": {
      ".write":"false",
      ".read":"false",
      "$chatbox_id": {
        ".write":"false",
        ".read":"false",
        "$contact_id": {
          ".indexOn": ["online", "contact_last_seen"],
          ".write":"(((((((false)))))))",
          ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))",
          "anonymous": {
            ".write":"(((!newData.exists()||newData.isBoolean())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          },
          "details": {
            ".write":"(((!newData.exists()||!(((newData.isString()||newData.isNumber()||newData.isBoolean()))))&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          },
          "online": {
            ".write":"(((!newData.exists()||newData.isBoolean())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          },
          "introduced": {
            ".write":"(((!newData.exists()||newData.isBoolean())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          },
          "triggered_by": {
            ".write":"(((!newData.exists()||newData.isString())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          },
          "agent": {
            ".write":"(((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)&&(!newData.exists()||newData.isString())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          },
          "messages": {
            ".write":"(false)",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))",
            "$message": {
              ".write":"(((!newData.parent().exists()||!(((newData.parent().isString()||newData.parent().isNumber()||newData.parent().isBoolean()))))&&newData.exists()&&!data.exists()&&(!newData.exists()||!(((newData.isString()||newData.isNumber()||newData.isBoolean()))))&&(newData.val()==null||newData.child('body').exists()&&newData.child('contact').exists()&&newData.child('created_at').exists()&&newData.child('from_agent').exists()&&newData.child('read').exists())&&(!newData.child('body').exists()||newData.child('body').isString())&&(!newData.child('contact').exists()||newData.child('contact').isString())&&(!newData.child('created_at').exists()||newData.child('created_at').isString())&&(!newData.child('from_agent').exists()||newData.child('from_agent').isBoolean())&&(!newData.child('read').exists()||newData.child('read').isBoolean())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
              ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))",
              "body": {
                ".write":"(((!newData.parent().parent().exists()||!(((newData.parent().parent().isString()||newData.parent().parent().isNumber()||newData.parent().parent().isBoolean()))))&&newData.exists()&&!data.exists()&&(!newData.parent().exists()||!(((newData.parent().isString()||newData.parent().isNumber()||newData.parent().isBoolean()))))&&(newData.parent().val()==null||newData.parent().child('body').exists()&&newData.parent().child('contact').exists()&&newData.parent().child('created_at').exists()&&newData.parent().child('from_agent').exists()&&newData.parent().child('read').exists())&&(!newData.exists()||newData.isString())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
                ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
              },
              "contact": {
                ".write":"(((!newData.parent().parent().exists()||!(((newData.parent().parent().isString()||newData.parent().parent().isNumber()||newData.parent().parent().isBoolean()))))&&newData.exists()&&!data.exists()&&(!newData.parent().exists()||!(((newData.parent().isString()||newData.parent().isNumber()||newData.parent().isBoolean()))))&&(newData.parent().val()==null||newData.parent().child('body').exists()&&newData.parent().child('contact').exists()&&newData.parent().child('created_at').exists()&&newData.parent().child('from_agent').exists()&&newData.parent().child('read').exists())&&(!newData.exists()||newData.isString())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
                ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
              },
              "created_at": {
                ".write":"(((!newData.parent().parent().exists()||!(((newData.parent().parent().isString()||newData.parent().parent().isNumber()||newData.parent().parent().isBoolean()))))&&newData.exists()&&!data.exists()&&(!newData.parent().exists()||!(((newData.parent().isString()||newData.parent().isNumber()||newData.parent().isBoolean()))))&&(newData.parent().val()==null||newData.parent().child('body').exists()&&newData.parent().child('contact').exists()&&newData.parent().child('created_at').exists()&&newData.parent().child('from_agent').exists()&&newData.parent().child('read').exists())&&(!newData.exists()||newData.isString())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
                ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
              },
              "from_agent": {
                ".write":"(((!newData.parent().parent().exists()||!(((newData.parent().parent().isString()||newData.parent().parent().isNumber()||newData.parent().parent().isBoolean()))))&&newData.exists()&&!data.exists()&&(!newData.parent().exists()||!(((newData.parent().isString()||newData.parent().isNumber()||newData.parent().isBoolean()))))&&(newData.parent().val()==null||newData.parent().child('body').exists()&&newData.parent().child('contact').exists()&&newData.parent().child('created_at').exists()&&newData.parent().child('from_agent').exists()&&newData.parent().child('read').exists())&&(!newData.exists()||newData.isBoolean())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
                ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
              },
              "read": {
                ".write":"(((!newData.parent().parent().exists()||!(((newData.parent().parent().isString()||newData.parent().parent().isNumber()||newData.parent().parent().isBoolean()))))&&newData.exists()&&!data.exists()&&(!newData.parent().exists()||!(((newData.parent().isString()||newData.parent().isNumber()||newData.parent().isBoolean()))))&&(newData.parent().val()==null||newData.parent().child('body').exists()&&newData.parent().child('contact').exists()&&newData.parent().child('created_at').exists()&&newData.parent().child('from_agent').exists()&&newData.parent().child('read').exists())&&(!newData.exists()||newData.isBoolean())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
                ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
              },
              "$other":{".validate":"false"}
            }
          },
          "contact_typing": {
            ".write":"(((!newData.exists()||newData.isBoolean())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          },
          "agent_typing": {
            ".write":"(((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)&&(!newData.exists()||newData.isBoolean())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          },
          "agent_last_seen": {
            ".write":"(((root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)&&(!newData.exists()||newData.isString())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          },
          "contact_last_seen": {
            ".write":"(((!newData.exists()||newData.isString())&&(auth.admin===true||$contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid)))",
            ".read":"(($contact_id===auth.uid||root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/active').val()===true&&root.child('chatboxes/'+$chatbox_id+'/agents/'+auth.uid+'/admin').val()===true||root.child('contacts/'+$chatbox_id+'/'+$contact_id+'/agent').val()===auth.uid))"
          }
        }
      }
    }
  }
}
